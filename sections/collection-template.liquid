{% if section.settings.results_per_page %}
{%- assign limit_product = section.settings.results_per_page -%}
{% else %}
{%- assign limit_product = 10 -%}
{% endif %}

{%- assign _item = settings.mode_view_default -%}
{% case settings.mode_view_default %}
{% when 'grid-2' %}
{%- assign grid_item_width = 'col-xl-6 col-lg-4 col-md-4 col-sm-4 col-xs-6' -%}
{%- assign image_size = '600x' -%}
{% when 'grid-3' %}
{%- assign grid_item_width = 'col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-6' -%}
{%- assign image_size = '500x' -%}
{% when 'grid-4' %}
{%- assign grid_item_width = 'col-xl-3 col-lg-4 col-md-4 col-sm-4 col-xs-6' -%}
{%- assign image_size = '300x' -%}

{% endcase %}

{% assign column1			= section.settings.column1  %}
{% assign column2 			= section.settings.column2  %}
{% assign column3 			= section.settings.column3  %}

{%- assign sidebar 			= settings.enable_collection_sidebar -%}
{%- assign sidebar_position 	= settings.sidebar_position -%}
{% include 'breadcrumb' %}
<div class="container {% if sidebar %} positon-sidebar{% endif %}">
  
  <div class="row">
    {% if sidebar and sidebar_position == 'left' %}
    <div class="col-sidebar sidebar-fixed col-lg-3">
      {% include 'sidebar-collection' %}
    </div>
    {% endif %}
    <div class="sidebar-overlay"></div>
    <div class="col-main {% if sidebar %}col-lg-9 {% else %}col-full{%- endif -%}">
      <a href="javascript:void(0)" class="open-sidebar d-lg-none"><i class="fa fa-bars"></i>{{ 'general.sidebar' | t }}</a>
      
<div class="collection-infos">
  <div class="collection-info banners">
  {% if section.settings.show_collection_image and collection.image %}
  <div class="collection-image">
    <img loading="lazy" class="img-responsive" src="{{ collection.image.src | img_url: 'master' }}" alt="#">
  </div>
  {% endif %}

  <div class="collection-info-full">
    {% if section.settings.show_collection_title %}
    <h1 class="collection-tille">{{ collection.title }}</h1>
    {% endif %}
    {% if section.settings.show_collection_des and collection.description != blank %}
    <div class="rte des">
      {{ collection.description }}
    </div>
    {% endif %}
  </div>
</div>

{% if section.settings.show_collection and section.settings.linklist_collections_name != blank %}
<div class="category-carousel ss-carousel ss-owl">
  <div class="owl-carousel" 
       data-nav		="true"
       data-margin		="30"
       {% if settings.enable_rtl %}data-rtl="true"{% endif %}
       data-column1	="{{ column1 }}" 
       data-column2	="{{ column2 }}" 
       data-column3	="{{ column3 }}" 
       data-column4	="3" 
       data-column5	="2">
    {% for link in linklists[section.settings.linklist_collections_name].links %}
    {% assign _collection = link.object %}
    <div class="product-category">
      <a href="{{ _collection.url }}"><img loading="lazy" src="{{ _collection.image.src | img_url: '400x480', crop:'center' }}" alt="#"></a>
      <div class="category-info">
        <div class="category">
          <h5 class="category-info__title">{{ _collection.title }}</h5>
          <div class="category-info__count">{{ _collection.products.size }} items</div>
        </div>
      </div>
    </div>

    {% endfor %}
  </div>
</div>
  
{% endif %}

<div class="collection-main">
  <div class="filters-toolbar-wrapper">
    {% include 'collection-toolsbar' %}
  </div>
</div>
</div>
       {% if sidebar == false %}
  <div class="col-sidebar sidebar-fixed">
    {% if template contains 'collection' %}
    {% include 'sidebar-filter-collection' %}
    {% endif %}
  </div>
 {% endif %}

{% paginate collection.products by limit_product %}
<div data-section-id="{{ section.id }}" data-section-type="collection-template" class="products-collection">
  <div class="product-wrapper" id="Collection">
    <div class="products-listing row {{ section.settings.pagination_style }}">
      {% for product in collection.products %}
      <div id="product-{{ forloop.index | plus:paginate.current_offset }}" class="product product-layout grid__item grid__item--{{section.id}} {{ grid_item_width }} {% if _item == '2' %}grid_2{% endif %}{% if _item == '3' %}grid_3{% endif %}{% if _item == '4' %}grid_4{% endif %}{% if _item == '5' %}grid_5{% endif %}{% if _item == '6' %}grid_6{% endif %}" data-price="{{ product.price | money_without_currency }}">
        <span class="d-none">{{ product.price | money }}</span>
        {% include 'product-card-grid', grid_image_width: image_size %}
      </div>
      {% endfor %}
  
     
      {% if section.settings.pagination_style =='default' %}
      {% if paginate.pages > 1 %}
      <div class="d-flex justify-content-center col-12">
        {% include 'pagination-custom' %}
      </div>
      {% endif %}
      {% else %}
      {% if paginate.next %}
      <div class="pagination loadmore d-flex justify-content-center col-12">
        <a class="btn btn-default loadmore" href="{{ paginate.next.url }}">{{ 'collections.general.load_more' | t}}</a>
      </div>
      {% endif %}
      {% endif %}
    </div>
    {% if is_empty_collection %}
    <div class="small--text-center">
      <p class="text-left">{{ 'collections.general.no_matches' | t }}</p>
    </div>
    {% endif %}
  </div>
</div>
{% endpaginate %}
    </div>
    {% if sidebar and sidebar_position == 'right' %}
    <div class="col-sidebar sidebar-fixed col-lg-3">
      {% include 'sidebar-collection' %}
    </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
"name": "Collection Pages",
"settings": [
{
"type":      "radio",
"id":        "pagination_style",
"label":     "Pagination style",
"options": [
{ "value": "default", "label": "Default" },
{ "value": "EndlessScroll", "label": "Scroll" },
{ "value": "EndlessClick", "label": "Click" }
],
"default":   "EndlessClick"
},

{
"type": "select",
"id": "rows",
"label": "Rows per page (grid only)",
"default": "2",
"options": [
{
"value": "2",
"label": "2"
},
{
"value": "3",
"label": "3"
},
{
"value": "4",
"label": "4"
},
{
"value": "5",
"label": "5"
},
{
"value": "6",
"label": "6"
},
{
"value": "7",
"label": "7"
},
{
"value": "8",
"label": "8"
}
]
},
{
"type": "text",
"id": "results_per_page",
"label": "Products per page  (grid only) ",
"default": "15"
},
{
        "type": "header",
        "content": "Collection info"
      },
{
        "type": "checkbox",
        "id": "show_collection_image",
        "label": "Display Image Category?",
        "default": true
      },
	   {
        "type": "checkbox",
        "id": "show_collection_title",
        "label": "Display Image title?",
        "default": true
      },
		{
        "type": "checkbox",
        "id": "show_collection_des",
        "label": "Display Image description?",
        "default": true
      },
      {
        "type": "header",
        "content": "Sub Collections Settings"
      },
	  {
        "type": "checkbox",
        "id": "show_collection",
        "label": "Display Sub Collections?",
        "default": true
      },
      {
        "type": "link_list",
        "id": "linklist_collections_name",
        "label": "Collections"
      },
	  {
            "type": "select",
            "id": "column1",
            "label": "#Column 1",
            "default": "4",
			"info": "For Large desktops have screen > 1200px",
            "options":[
            	{
            		"value": "2",
                    "label": "2"
            	},
            	{
            		"value": "3",
                    "label": "3"
            	},
            	{
            		"value": "4",
                    "label": "4"
            	},
            	{
            		"value": "5",
                    "label": "5"
            	},
				{
            		"value": "6",
                    "label": "6"
            	}
            ]
        },
		{
            "type": "select",
            "id": "column2",
            "label": "#Column 2",
            "default": "3",
			"info": "For Tablets have screen 991px to 1199px.",
            "options":[
            	{
            		"value": "1",
                    "label": "1"
            	},
            	{
            		"value": "2",
                    "label": "2"
            	},
            	{
            		"value": "3",
                    "label": "3"
            	},
            	{
            		"value": "4",
                    "label": "4"
            	},
            	{
            		"value": "5",
                    "label": "5"
            	}
            ]
        },
		{
            "type": "select",
            "id": "column3",
            "label": "#Column 3",
			"info": "For Tablets have screen 768px to 991px.",
            "default": "2",
            "options":[
            	{
            		"value": "1",
                    "label": "1"
            	},
            	{
            		"value": "2",
                    "label": "2"
            	},
            	{
            		"value": "3",
                    "label": "3"
            	},
            	{
            		"value": "4",
                    "label": "4"
            	},
            	{
            		"value": "5",
                    "label": "5"
            	}
            ]
        },
{
        "type": "header",
        "content": "Sidebar Categories"
      },
	  {
        "type": "checkbox",
        "id": "enable_filter",
        "label": "Enable filter ?",
        "default": true
      },
	  {
        "type": "checkbox",
        "id": "enable_filter-fixed",
        "label": "Only used filter fixed layout 1 coluomn",
        "default": false
      }

],
"blocks": [
		{
			"type": "filter_color",
            "name": "Filter Color",
            "settings": [
              	{
                    "type": "checkbox",
                    "id": "enable",
                    "label": "Enable",
                    "default": true
                },
                {
                    "type": "text",
                    "id": "title",
                    "label": "Filter Title"
                },
                {
                    "type": "text",
                    "id": "color_text_1",
                    "label": "Color tag name 1",
                    "info": "i.e \"Red\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_1",
                    "label": "Color image 1"
                },
                {
                    "type": "text",
                    "id": "color_text_2",
                    "label": "Color tag name 2",
                    "info": "i.e \"Blue\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_2",
                    "label": "Color image 2"
                },
                {
                    "type": "text",
                    "id": "color_text_3",
                    "label": "Color tag name 3",
                    "info": "i.e \"Brown\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_3",
                    "label": "Color image 3"
                },
                {
                    "type": "text",
                    "id": "color_text_4",
                    "label": "Color tag name 4",
                    "info": "i.e \"Orange\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_4",
                    "label": "Color image 4"
                },
                {
                    "type": "text",
                    "id": "color_text_5",
                    "label": "Color tag name 5",
                    "info": "i.e \"Green\"."
                },
				{
                    "type": "image_picker",
                    "id": "color_img_5",
                    "label": "Color image 5"
                },
                {
                    "type": "text",
                    "id": "color_text_6",
                    "label": "Color tag name 6",
                    "info": "i.e \"Black\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_6",
                    "label": "Color image 6"
                },
                {
                    "type": "text",
                    "id": "color_text_7",
                    "label": "Color tag name 7",
                    "info": "i.e \"Pink\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_7",
                    "label": "Color image 7"
                },
                {
                    "type": "text",
                    "id": "color_text_8",
                    "label": "Color tag name 8",
                    "info": "i.e \"Sliver\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_8",
                    "label": "Color image 8"
                },
                {
                    "type": "text",
                    "id": "color_text_9",
                    "label": "Color tag name 9",
                    "info": "i.e \"White\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_9",
                    "label": "Color image 9"
                },
                {
                    "type": "text",
                    "id": "color_text_10",
                    "label": "Color tag name 10",
                    "info": "i.e \"Yellow\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_10",
                    "label": "Color image 10"
                },
                {
                    "type": "text",
                    "id": "color_text_11",
                    "label": "Color tag name 11",
                    "info": "i.e \"Red\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_11",
                    "label": "Color image 11"
                },
                {
                    "type": "text",
                    "id": "color_text_12",
                    "label": "Color tag name 12",
                    "info": "i.e \"Red\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_12",
                    "label": "Color image 12"
                },
                {
                    "type": "text",
                    "id": "color_text_13",
                    "label": "Color tag name 13",
                    "info": "i.e \"Red\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_13",
                    "label": "Color image 13"
                },
                {
                    "type": "text",
                    "id": "color_text_14",
                    "label": "Color tag name 14",
                    "info": "i.e \"Red\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_14",
                    "label": "Color image 14"
                },
                {
                    "type": "text",
                    "id": "color_text_15",
                    "label": "Color tag name 15",
                    "info": "i.e \"Red\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_15",
                    "label": "Color image 15"
                },
                {
                    "type": "text",
                    "id": "color_text_16",
                    "label": "Color tag name 16",
                    "info": "i.e \"Red\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_16",
                    "label": "Color image 16"
                },
                {
                    "type": "text",
                    "id": "color_text_17",
                    "label": "Color tag name 17",
                    "info": "i.e \"Red\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_17",
                    "label": "Color image 17"
                },
                {
                    "type": "text",
                    "id": "color_text_18",
                    "label": "Color tag name 18",
                    "info": "i.e \"Red\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_18",
                    "label": "Color image 18"
                },
                {
                    "type": "text",
                    "id": "color_text_19",
                    "label": "Color tag name 19",
                    "info": "i.e \"Red\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_19",
                    "label": "Color image 19"
                },
                {
                    "type": "text",
                    "id": "color_text_20",
                    "label": "Color tag name 20",
                    "info": "i.e \"Red\"."
                },
                {
                    "type": "image_picker",
                    "id": "color_img_20",
                    "label": "Color image 20"
                }
			]
		},
		{
            "type": "filter_tag",
            "name": "Filter Tags",
            "settings": [
                {
                    "type": "checkbox",
                    "id": "enable",
                    "label": "Enable",
                    "default": true
                },
                {
                    "type": "text",
                    "id": "title",
                    "label": "Filter Title"
                },
                {
                    "type": "textarea",
                    "id": "list_tags",
                    "label": "List Tags",
                    "info": "Separate by a comma, i.e \"S, M, L\"."
                }
            ]
		}
    ]

}
{% endschema %}