<div class="block widget-filter clearfix">
  <div id="layered-navigation">
    <div class="block block-layered-nav">
      <div class="block-title">
        <strong
          >{{ 'collections.sidebar.shopby' | t }}</strong
        >
      </div>
      <div class="block-content">
        <div id="narrow-by-list">
          <div class="filter-tags">
            {% for block in section.blocks %}
              {% case block.type %}
                {% when 'filter_color' %}
                  {% if block.settings.enable %}
                    <div class="{% if settings.enable_collection_sidebar %}{% else %}col-12 col-xl-3 col-sm-6 {% endif %}{{ block.settings.title }}">
                      <dl>
                        {% if block.settings.title != blank %}
                          <dt>
                            <span class="category-filter">{{ block.settings.title }}</span>
                            <a href="javascript:void(0)" class="clear" style="display:none">
                              <i class="fa fa-trash" aria-hidden="true"></i> <span>{{ 'collections.sidebar.clear' | t }}</span>
                            </a>
                          </dt>
                        {% endif %}
                        <dd class="filter-color">
                          <ol>
                            {% for i in (1..20) %}
                              {% capture color_text %}color_text_{{ i }}{% endcapture %}
                              {% capture color %}color_img_{{ i }}{% endcapture %}

                              {% if block.settings[color] != blank %}
                                {%- assign img_url = block.settings[color] | img_url: '34x34' -%}
                              {% else %}
                                {%- assign img_url = '' -%}
                              {% endif %}

                              {% if color_text != blank %}
                                {% assign tag = block.settings[color_text] | strip %}
                                {% if collection.tags contains tag %}
                                  <li class="{{ tag | handleize }} {% if current_tags contains tag %}checked{% endif %}">
                                    {% assign tag_value = tag | handleize %}
                                    <input
                                      type="checkbox"
                                      value="{{ tag_value }}"
                                      {% if current_tags contains tag %}
                                        checked
                                      {% endif %}
                                    >
                                    <a
                                      href="javascript:void(0)"
                                      {% if current_tags contains tag %}
                                        class="active"
                                      {% endif %}
                                      title="{{ tag }}"
                                    >
                                      <span class="style-color"><img src="{{ img_url }}" alt="{{ tag }}"></span>
                                      <span class="name-color">{{ tag }}</span>
                                    </a>
                                  </li>
                                {% endif %}
                              {% endif %}
                            {% endfor %}
                          </ol>
                        </dd>
                      </dl>
                    </div>
                  {% endif %}
                {% when 'filter_tag' %}
                  {% if block.settings.enable %}
                    <div class="{% if settings.enable_collection_sidebar %}{% else %}col-12 col-xl-3 col-sm-6 {% endif %}{{ block.settings.title }}">
                      {% assign tags = block.settings.list_tags | split: ',' %}
                      <dl>
                        {% if block.settings.title != blank %}
                          <dt>
                            <span class="category-filter">{{ block.settings.title }}</span>

                            <a href="javascript:void(0)" class="clear" style="display:none">
                              <i class="fa fa-trash" aria-hidden="true"></i> <span>{{ 'collections.sidebar.clear' | t }}</span>
                            </a>
                          </dt>
                        {% endif %}
                        <dd>
                          <ol>
                            {% for t in tags %}
                              {% assign tag = t | strip %}
                              {% assign tag_value = tag | handleize %}

                              {% if current_tags contains tag %}
                                <li class="{% if current_tags contains tag %}checked{% endif %}">
                                  <input type="checkbox" value="{{ tag_value }}" checked>
                                  <label>{{ tag }}</label>
                                </li>
                              {% else %}
                                {% if collection.tags contains tag %}
                                  <li class="{% if current_tags contains tag %}checked{% endif %}">
                                    <input type="checkbox" value="{{ tag_value }}">
                                    <label>{{ tag }}</label>
                                  </li>
                                {% endif %}
                              {% endif %}
                            {% endfor %}
                          </ol>
                        </dd>
                      </dl>
                    </div>
                  {% endif %}
              {% endcase %}
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>